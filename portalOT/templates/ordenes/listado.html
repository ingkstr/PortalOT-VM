{% extends "base.html" %}

{% block head_content %}
    <title>Listado de órdenes de trabajo Maxcom</title>
{% endblock %}

{% load static %}

{% block container %}
      <div class="container mt-5 mb-5">
          <p class = "h1 mt-5 mb-5 text-center">Módulo de alta de órdenes y ventanas Maxcom</p>

          <input class="form-control mb-3" id="myInput" type="text" placeholder="Busqueda">



          <table class="table table-sm">
            <thead class="thead-light">
              <tr>
                <th scope="col">Orden</th>

                <th scope="col">Región</th>
                <th scope="col">Descripción</th>
                <th scope="col">Responsable</th>
                <th scope="col">Estatus</th>
              </tr>
            </thead>
            <tbody id="myTable">
              {% for orden in ordenes %}
              <tr>
                <th scope="row">{{ orden.id }}</th>
                <td>{{ orden.localidades }}</td>
                <td>{{ orden.asunto }}</td>
                <td>{{ orden.supervisor.nombre }}</td>
                <td>{% if orden.estatus == 0 %}<button type="button" class="btn btn-warning" data-toggle="modal" data-target=".modal-{{ orden.id }}" >En revisión</button>{% endif %}</td>
                <div class="modal fade modal-{{ orden.id }}" tabindex="-1" role="dialog" aria-hidden="true">
                  {% include "ordenes/consulta.html" %}
                </div>
              </tr>
              {% endfor %}
            </tbody>
          </table>



          <script>
          $(document).ready(function(){
            $("#myInput").on("keyup", function() {
              var value = $(this).val().toLowerCase();
              $("#myTable tr").filter(function() {
                $(this).toggle( $(this).text().toLowerCase().indexOf(value) > -1 );
              });
            });
          });

          </script>



          <nav>
                 <ul class="pagination justify-content-end">
                     {% if page_obj.has_previous %}
                         <li class="page-item">
                             <a class="page-link" href="?page={{ page_obj.previous_page_number }}">
                             Previous
                             </a>
                         </li>
                     {% endif %}
                     <li class="page-item">
                         <a class="page-link" href="#">
                             {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
                         </a>
                     </li>
                     {% if page_obj.has_next %}
                         <li class="page-item">
                             <a class="page-link" href="?page={{ page_obj.next_page_number }}">
                             Next
                             </a>
                         </li>
                     {% endif %}
                 </ul>
             </nav>


          <div class="container text-center">
        <a href = "{% url "ordenes:nuevo" %}">  <button type="button" class="btn btn-outline-primary">Crear nueva orden</button> </a>
          </div>


      </div>



{% endblock%}
